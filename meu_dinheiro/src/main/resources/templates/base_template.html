<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="baseHead">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle} + ' - Meu Dinheiro'">Meu Dinheiro</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        header { background-color: #333; color: white; padding: 10px; }
        nav ul { list-style-type: none; padding: 0; }
        nav ul li { display: inline; margin-right: 15px; }
        nav ul li a { color: white; text-decoration: none; }
        nav ul li a:hover { text-decoration: underline; }
        .content { padding: 20px; }
        .main-content, .form-section, .table-section { padding: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .form-container { margin: 20px 0; }
        .error { color: red; }
        .login-section { max-width: 400px; margin: 20px auto; padding: 20px; background-color: #f2f2f2; border-radius: 4px; }
        .login-section h2 { color: #333; margin-bottom: 15px; }
        .chart-section canvas { max-width: 600px; height: 300px; }
        footer { background-color: #333; color: white; text-align: center; padding: 10px; position: fixed; bottom: 0; width: 100%; }
    </style>
</head>
<body>
    <!-- Fragmento de Cabeçalho -->
    <header th:fragment="baseHeaderPage">
        <nav>
            <ul>
                <li><a th:href="@{/principal/{id}(id=${userId}, nome=${userName} ?: 'Usuário')}" th:text="#{app.welcome(${userName} ?: 'Usuário')}">Bem-vindo(a)</a></li>
                <li><a th:href="@{/despesa}">Despesas</a></li>
                <li><a th:href="@{/receita}">Receitas</a></li>
                <li><a th:href="@{/user/dashboard}">Dashboard</a></li>
                <li><a th:href="@{/admin/dashboard}" th:if="${isAdmin}">Admin</a></li>
                <li><a th:href="@{/principal/logout}" th:text="#{app.logout} ?: 'Sair'">Sair</a></li>
            </ul>
        </nav>
    </header>

    <!-- Fragmento de Container Principal -->
    <div th:fragment="content (mainTitle, subTitle)">
        <div class="content">
            <h1 th:text="${mainTitle} ?: 'Título Padrão'">Título Principal</h1>
            <p th:text="${subTitle} ?: 'Subtítulo Padrão'">Subtítulo ou Instruções</p>
        </div>
    </div>

    <div th:fragment="form-section (formTitle, routePrefix, item, fieldNames)">
        <div class="form-container">
            <h2 th:text="${formTitle}">Título do Formulário</h2>
            <form th:action="@{'/' + ${routePrefix}}" th:object="${item}" method="post">
                <input type="hidden" th:field="*{id}" />
                <div th:each="field : ${fieldNames}">
                    <div>
                        <label th:for="${'field_' + field}" th:text="${#strings.capitalize(field)} + ':'"></label>
                        <input th:id="'field_' + field" th:field="*{__${field}__}" />
                        <span th:if="${#fields.hasErrors(field)}" th:errors="*{__${field}__}" class="error"></span>
                    </div>
                </div>
                <button type="submit">Salvar</button>
                <a th:href="@{'/' + ${routePrefix}}" th:unless="${#strings.isEmpty(routePrefix)}">Cancelar</a>
            </form>
        </div>
    </div>

    <!-- Fragmento de Seção de Tabela -->
    <div th:fragment="table-section (routePrefix, items)">
        <div class="content">
            <h2>Lista de Itens</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="item : ${items}">
                        <td th:text="${item.id} ?: 'N/A'">ID</td>
                        <td th:text="${item.nome} ?: 'Sem Nome'">Nome</td>
                        <td>
                            <a th:href="@{'/' + ${routePrefix} + '/editar/{id}'(id=${item.id})}">Editar</a>
                            <a th:href="@{'/' + ${routePrefix} + '/excluir/{id}'(id=${item.id})}" 
                               onclick="return confirm('Tem certeza que deseja excluir?');">Excluir</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p><a th:href="@{'/' + ${routePrefix} + '/nova'}">Adicionar Novo Item</a></p>
        </div>
    </div>

    <!-- Fragmento de Rodapé -->
    <footer th:fragment="baseFooter">
        <p>&copy; 2025 Meu Dinheiro - Raphael e João Pedro</p>
    </footer>
</body>
</html>